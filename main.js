!function(){"use strict";class e{#e;#t;#s;#n;#i;#o;#r;#a;#l;constructor(e,t,s){let{name:n,link:i}=e;this.#e=n,this.#t=i,this.#s=t,this.#l=s}#c(){this.#i=this.#n.querySelector(".card__like-button"),this.#o=this.#n.querySelector(".card__delete-button"),this.#i.addEventListener("click",(()=>{this.#m()})),this.#o.addEventListener("click",(()=>{this.#u()})),this.#r.addEventListener("click",(()=>{this.#l(this.#t,this.#e)}))}#m(){this.#i.classList.toggle("card__liked-heart")}#u(){this.#n.remove(),this.#n=null}getCardElement(){const e=document.querySelector(this.#s).content.firstElementChild;return this.#n=e.cloneNode(!0),this.#r=this.#n.querySelector(".card__image"),this.#a=this.#n.querySelector(".card__label-title"),this.#r.src=this.#t,this.#r.alt=this.#e,this.#a.textContent=this.#e,this.#c(),this.#n}}class t{#d;#p;#h;#_;constructor(e,t){this.#d=e,this.#p=t}#E(e){const{inputErrorClass:t,errorClass:s}=this.#d,n=this.#p.querySelector(`#${e.id}-error`);e.validity.valid?(e.classList.remove(t),n.textContent="",n.classList.remove(s)):(e.classList.add(t),n.textContent=e.validationMessage,n.classList.add(s))}#g(){this.#_.classList.contains(this.#d.inactiveButtonClass)||this.#_.classList.add(this.#d.inactiveButtonClass),this.#_.disabled||(this.#_.disabled=!0)}#b(){this.#_.classList.contains(this.#d.inactiveButtonClass)&&this.#_.classList.remove(this.#d.inactiveButtonClass),this.#_.disabled&&(this.#_.disabled=!1)}#S(){this.#h.every((e=>e.validity.valid))?this.#b():this.#g()}#c(){const{inputSelector:e}=this.#d;this.#h=[...this.#p.querySelectorAll(e)],this.#h.forEach((e=>{e.addEventListener("input",(t=>{this.#E(e),this.#S()}))}))}enableValidation(){this.#_=this.#p.querySelector(this.#d.submitButtonSelector),this.#c()}resetForm(){this.#p.reset(),this.#S()}}class s{#C;constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._popupClose=this._popupElement.querySelector(".modal__close"),this.#C=this._handleEscapeClose.bind(this),this.setEventListeners()}_handleEscapeClose(e){let{key:t}=e;"Escape"===t&&this.close()}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this.#C)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this.#C)}setEventListeners(){this._popupClose.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target===e.currentTarget&&this.close()}))}}class n extends s{#k;constructor(e){let{popupSelector:t,handleFormSubmit:s,handleFormClose:n}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._handleFormClose=n,this._setEventListeners()}_setEventListeners(){this.#k=this._popupForm.querySelectorAll(".modal__input"),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._handleFormClose(),super.close()}_getInputValues(){const e={};return this.#k.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this.#k.forEach((t=>{e[t.name]&&(t.value=e[t.name])}))}}const i=document.querySelector("#profile__edit-button"),o=document.querySelector(".profile__plus-button"),r=new class extends s{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupImage=document.querySelector(".big-picture-img"),this._popupImageDescription=document.querySelector(".modal__image_footer")}open(e){e&&(this._popupImage.src=e.link,this._popupImage.alt=e.name,this._popupImageDescription.textContent=e.name),super.open()}}({popupSelector:"#image-modal"}),a={};var l;l={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},Array.from(document.querySelectorAll(l.formSelector)).forEach((e=>{const s=new t(l,e),n=e.getAttribute("name");a[n]=s,s.enableValidation()}));const c=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this._container.append(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>u(e)},".cards__list"),m=new n({popupSelector:"#card-add-modal",handleFormSubmit:function(e){c.addItem(u(e))},handleFormClose:()=>{a.cardAddForm.resetForm()}});function u(t){return new e(t,"#card-template",d).getCardElement()}function d(e,t){r.open({link:e,name:t})}o.addEventListener("click",(()=>{m.open()}));const p=new class{constructor(e,t){this._nameElement=document.querySelector(e),this._descriptionElement=document.querySelector(t)}getUserInfo(){return{name:this._nameElement.textContent,description:this._descriptionElement.textContent}}setUserInfo(e){this._nameElement.textContent=e.name,this._descriptionElement.textContent=e.description}}(".profile__title",".profile__description"),h=new n({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{p.setUserInfo(e),a.profileEditForm.resetForm()},handleFormClose:()=>{}});i.addEventListener("click",(()=>{h.setInputValues(p.getUserInfo()),h.open()})),c.renderItems()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNmbUIsRUFBNEIsWUFBRXJDLFdBQVcsSUFJN0MsU0FBUzBELEVBQVdFLEdBRWxCLE9BRGEsSUFBSXpHLEVBQUt5RyxFQUFVLGlCQUFrQnJHLEdBQ3RDUyxnQkFDZCxDQU1BLFNBQVNULEVBQWdCRSxFQUFNRCxHQUM3QjBFLEVBQWdCdEIsS0FBSyxDQUFFbkQsT0FBTUQsUUFDL0IsQ0FHQXlFLEVBQWNyRSxpQkFBaUIsU0FBUyxLQUN0QytGLEVBQWEvQyxNQUFNLElBSXJCLE1BQU1pRCxFQUFXLElHeEVGLE1BQ2J6RyxXQUFBQSxDQUFZMEcsRUFBa0JDLEdBQzVCckcsS0FBS3NHLGFBQWU5RixTQUFTUCxjQUFjbUcsR0FDM0NwRyxLQUFLdUcsb0JBQXNCL0YsU0FBU1AsY0FBY29HLEVBQ3BELENBRUFHLFdBQUFBLEdBS0UsTUFKa0IsQ0FDaEIxRyxLQUFNRSxLQUFLc0csYUFBYXhGLFlBQ3hCMkYsWUFBYXpHLEtBQUt1RyxvQkFBb0J6RixZQUcxQyxDQUVBNEYsV0FBQUEsQ0FBWXRDLEdBQ1ZwRSxLQUFLc0csYUFBYXhGLFlBQWNzRCxFQUFLdEUsS0FDckNFLEtBQUt1RyxvQkFBb0J6RixZQUFjc0QsRUFBS3FDLFdBQzlDLEdIdUQ0QixrQkFBbUIseUJBQzNDRSxFQUF1QixJQUFJckQsRUFBYyxDQUM3Q2IsY0FBZSxzQkFDZmMsaUJBQW1CcUQsSUFDakJULEVBQVNPLFlBQVlFLEdBTXJCakMsRUFBZ0MsZ0JBQUVyQyxXQUFXLEVBRS9Da0IsZ0JBQWlCQSxTQUluQmMsRUFBa0JwRSxpQkFBaUIsU0FBUyxLQUMxQ3lHLEVBQXFCeEMsZUFBZWdDLEVBQVNLLGVBQzdDRyxFQUFxQnpELE1BQU0sSUFHN0JpQyxFQUFRTyxhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAjbmFtZTtcclxuICAjbGluaztcclxuICAjY2FyZFRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgI2NhcmRFbGVtZW50O1xyXG4gICNjYXJkTGlrZUJ1dHRvbjtcclxuICAjY2FyZERlbGV0ZUJ1dHRvbjtcclxuICAjY2FyZEltYWdlRWw7XHJcbiAgI2NhcmRUaXRsZUVsO1xyXG4gICNoYW5kbGVDYXJkQ2xpY2s7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkVGVtcGxhdGVTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrKSB7XHJcbiAgICB0aGlzLiNuYW1lID0gbmFtZTtcclxuICAgIHRoaXMuI2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy4jY2FyZFRlbXBsYXRlU2VsZWN0b3IgPSBjYXJkVGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuI2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gICNzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuI2NhcmRMaWtlQnV0dG9uID0gdGhpcy4jY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcclxuICAgIHRoaXMuI2NhcmREZWxldGVCdXR0b24gPSB0aGlzLiNjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcblxyXG4gICAgdGhpcy4jY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy4jaGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy4jY2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLiNoYW5kbGVEZWxldGVJY29uKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLiNjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLiNoYW5kbGVDYXJkQ2xpY2sodGhpcy4jbGluaywgdGhpcy4jbmFtZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gICNoYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuI2NhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlZC1oZWFydFwiKTtcclxuICB9XHJcblxyXG4gICNoYW5kbGVEZWxldGVJY29uKCkge1xyXG4gICAgdGhpcy4jY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLiNjYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkRWxlbWVudCgpIHtcclxuICAgIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4jY2FyZFRlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLiNjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLiNjYXJkSW1hZ2VFbCA9IHRoaXMuI2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLiNjYXJkVGl0bGVFbCA9IHRoaXMuI2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGFiZWwtdGl0bGVcIik7XHJcbiAgICB0aGlzLiNjYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLiNsaW5rO1xyXG4gICAgdGhpcy4jY2FyZEltYWdlRWwuYWx0ID0gdGhpcy4jbmFtZTtcclxuICAgIHRoaXMuI2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy4jbmFtZTtcclxuXHJcbiAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLiNjYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgI3NldHRpbmdzO1xyXG4gICNmb3JtRWxlbWVudDtcclxuICAjaW5wdXRFbHM7XHJcbiAgI3N1Ym1pdEJ1dHRvbjtcclxuXHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLiNzZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgdGhpcy4jZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIC8vIGNoZWNrIGZpZWxkIGlzIHZhbGlkXHJcbiAgI2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBjb25zdCB7IGlucHV0RXJyb3JDbGFzcywgZXJyb3JDbGFzcyB9ID0gdGhpcy4jc2V0dGluZ3M7XHJcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKGlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZChlcnJvckNsYXNzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShpbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUoZXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAjZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIGlmICghdGhpcy4jc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLiNzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKSkge1xyXG4gICAgICB0aGlzLiNzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLiNzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXRoaXMuI3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLiNzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgI2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLiNzdWJtaXRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuI3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpKSB7XHJcbiAgICAgIHRoaXMuI3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuI3NldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzLiNzdWJtaXRCdXR0b24uZGlzYWJsZWQpIHtcclxuICAgICAgdGhpcy4jc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB0b2dnbGUgc3VibWl0IGJ1dHRvbiBzdGF0ZVxyXG4gICN0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICghdGhpcy4jaW5wdXRFbHMuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpKSB7XHJcbiAgICAgIHRoaXMuI2Rpc2FibGVCdXR0b24oKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuI2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gc2V0IGV2ZW50IGhhbmRsZXJzXHJcbiAgI3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgY29uc3QgeyBpbnB1dFNlbGVjdG9yIH0gPSB0aGlzLiNzZXR0aW5ncztcclxuICAgIHRoaXMuI2lucHV0RWxzID0gWy4uLnRoaXMuI2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoaW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy4jaW5wdXRFbHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIHRoaXMuI2NoZWNrSW5wdXRWYWxpZGl0eShlbGVtZW50KTtcclxuICAgICAgICB0aGlzLiN0b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgLy8gZW5hYmxlcyBmb3JtIHZhbGlkYXRpb25cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy4jc3VibWl0QnV0dG9uID0gdGhpcy4jZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLiNzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLiNzZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRGb3JtKCkge1xyXG4gICAgdGhpcy4jZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICAgIHRoaXMuI3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfVxyXG59XHJcbiIsImZ1bmN0aW9uIGV2ZW50SGFuZGxlcihwb3B1cCwgZSkge31cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAvKlxyXG4gICAqIFByb3BlcnR5IGlzIG5lZWRlZCBpbiBvcmRlciB0byBzdG9yZSBldmVudCBsaXN0ZW5lciBjYWxsYmFjaywgYXMgcmVtb3ZlRXZlbnRMaXN0ZW5lciBkb2VzIG5vdCB3b3JrXHJcbiAgICogd2hlbiB0cnlpbmcgdG8gcmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyIHdpdGggYW4gYW5vbnltb3VzIGZ1bmN0aW9uIGFzIHRoZSBjYWxsYmFja1xyXG4gICAqL1xyXG4gICNoYW5kbGVFc2NhcGVDbG9zZUNhbGxiYWNrO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwQ2xvc2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLiNoYW5kbGVFc2NhcGVDbG9zZUNhbGxiYWNrID0gdGhpcy5faGFuZGxlRXNjYXBlQ2xvc2UuYmluZCh0aGlzKTtcclxuXHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjYXBlQ2xvc2UoeyBrZXkgfSkge1xyXG4gICAgaWYgKGtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVFc2NhcGVDbG9zZUNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLiNoYW5kbGVFc2NhcGVDbG9zZUNhbGxiYWNrKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBIYW5kbGVzIGNsaWNraW5nIHRoZSBvdmVybGF5L291dHNpZGUgdGhlIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZSkgPT4ge1xyXG4gICAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICAjaW5wdXRFbGVtZW50cztcclxuXHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCBoYW5kbGVGb3JtQ2xvc2UgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1DbG9zZSA9IGhhbmRsZUZvcm1DbG9zZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLiNpbnB1dEVsZW1lbnRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1DbG9zZSgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGlucHV0VmFsdWVzID0ge307XHJcbiAgICB0aGlzLiNpbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudHMpID0+IHtcclxuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXRFbGVtZW50cy5uYW1lXSA9IGlucHV0RWxlbWVudHMudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcclxuICAgIHRoaXMuI2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaWYgKGRhdGFbaW5wdXQubmFtZV0pIHtcclxuICAgICAgICBpbnB1dC52YWx1ZSA9IGRhdGFbaW5wdXQubmFtZV07XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgeyBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vRWxlbWVudHNcclxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19wbHVzLWJ1dHRvblwiKTtcclxuY29uc3QgYmlnUGljdHVyZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHsgcG9wdXBTZWxlY3RvcjogXCIjaW1hZ2UtbW9kYWxcIiB9KTtcclxuXHJcbi8vIFVzZWQgdG8gc3RvcmUgb3VyIGZvcm0gdmFsaWRhdG9yc1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuY29uc3QgY3JlYXRlVmFsaWRhdG9ycyA9IChjb25maWcpID0+IHtcclxuICBjb25zdCBmb3JtcyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XHJcbiAgZm9ybXMuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgIC8vIENyZWF0ZSBuZXcgaW5zdGFuY2Ugb2YgdGhlIHZhbGlkYXRvciBmb3IgZWFjaCBmb3JtIGVsZW1lbnRcclxuICAgIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpO1xyXG5cclxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgdGhlICduYW1lJyBhdHRyaWJ1dGUgb2YgdGhlIGZvcm0gZWxlbWVudFxyXG4gICAgY29uc3QgZm9ybU5hbWUgPSBmb3JtRWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG5cclxuICAgIC8vIFN0b3JlIHRoZSB2YWxpZGF0b3IgYnkgdGhlICduYW1lJyBhdHRyaWJ1dGUgb2YgdGhlIGZvcm1cclxuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IHZhbGlkYXRvcjtcclxuICAgIHZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgfSk7XHJcbn07XHJcblxyXG5jcmVhdGVWYWxpZGF0b3JzKHNldHRpbmdzKTtcclxuXHJcbi8qIFNlY3Rpb24gRnVuY3Rpb25zICovXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiBjcmVhdGVDYXJkKGl0ZW0pLFxyXG4gIH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5cclxuLyogQ2FyZCBGdW5jdGlvbnMgKi9cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2NhcmQtYWRkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogaGFuZGxlQ2FyZEZvcm1TdWJtaXQsXHJcbiAgaGFuZGxlRm9ybUNsb3NlOiAoKSA9PiB7XHJcbiAgICBmb3JtVmFsaWRhdG9yc1tcImNhcmRBZGRGb3JtXCJdLnJlc2V0Rm9ybSgpO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gIHJldHVybiBjYXJkLmdldENhcmRFbGVtZW50KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRGb3JtU3VibWl0KGRhdGEpIHtcclxuICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhsaW5rLCBuYW1lKSB7XHJcbiAgYmlnUGljdHVyZVBvcHVwLm9wZW4oeyBsaW5rLCBuYW1lIH0pO1xyXG59XHJcblxyXG4vKiBDYXJkIEV2ZW50IExpc3RlbmVycyAqL1xyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgbmV3Q2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vKiBQcm9maWxlIEVkaXQgRnVuY3Rpb25zICovXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZm9ybURhdGEpID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKGZvcm1EYXRhKTtcclxuICAgIC8qXHJcbiAgICAgKiBDYW5ub3QgbW92ZSByZXNldEZvcm0oKSBpbnRvIGhhbmRsZUZvcm1DbG9zZSwgYmVjYXVzZSBmb3IgdGhlIHByb2ZpbGUgZWRpdCBtb2RhbCwgd2UgZG9uJ3Qgd2FudCB0b1xyXG4gICAgICogY2hhbmdlIHRoZSBzdWJtaXQgYnV0dG9uJ3MgZGlzYWJsZWQgc3RhdGUuIFRoZSBmb3JtIGlzIGF1dG9tYXRpY2FsbHkgZmlsbGVkIHdpdGggZXhpc3RpbmcgZGF0YSwgc29cclxuICAgICAqIHRoZSBzdWJtaXQgYnV0dG9uIHNob3VsZCBuZXZlciBiZSBkaXNhYmxlZCB3aGVuIG9wZW5pbmcgdGhlIG1vZGFsXHJcbiAgICAgKi9cclxuICAgIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZUVkaXRGb3JtXCJdLnJlc2V0Rm9ybSgpO1xyXG4gIH0sXHJcbiAgaGFuZGxlRm9ybUNsb3NlOiAoKSA9PiB7fSxcclxufSk7XHJcblxyXG4vKiBQcm9maWxlIEV2ZW50IExpc3RlbmVycyAqL1xyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHByb2ZpbGVFZGl0UG9wdXBGb3JtLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xyXG4gIHByb2ZpbGVFZGl0UG9wdXBGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5zZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJpZy1waWN0dXJlLWltZ1wiKTtcclxuICAgIHRoaXMuX3BvcHVwSW1hZ2VEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlX2Zvb3RlclwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgaWYgKGRhdGEpIHtcclxuICAgICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICAgIHRoaXMuX3BvcHVwSW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgICB0aGlzLl9wb3B1cEltYWdlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICB9XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IGl0ZW1FbGVtZW50ID0gdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoaXRlbUVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICBjb25zdCB1c2VySW5wdXQgPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5fZGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VySW5wdXQ7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInJlbW92ZSIsImdldENhcmRFbGVtZW50IiwiY2FyZFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiaW5wdXRFbCIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRpdHkiLCJ2YWxpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiY29udGFpbnMiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiZGlzYWJsZWQiLCJldmVyeSIsImlucHV0U2VsZWN0b3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJlIiwiZW5hYmxlVmFsaWRhdGlvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwicmVzZXRGb3JtIiwicmVzZXQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX3BvcHVwQ2xvc2UiLCJfaGFuZGxlRXNjYXBlQ2xvc2UiLCJiaW5kIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJfcmVmMiIsImtleSIsImNsb3NlIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJoYW5kbGVGb3JtQ2xvc2UiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtQ2xvc2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXRFbGVtZW50cyIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwiaW5wdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsImNhcmRBZGRCdXR0b24iLCJiaWdQaWN0dXJlUG9wdXAiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cEltYWdlRGVzY3JpcHRpb24iLCJmb3JtVmFsaWRhdG9ycyIsImNvbmZpZyIsImZvcm1TZWxlY3RvciIsIkFycmF5IiwiZnJvbSIsInZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIiwic2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJpdGVtRWxlbWVudCIsImFwcGVuZCIsImFkZEl0ZW0iLCJwcmVwZW5kIiwiY3JlYXRlQ2FyZCIsIm5ld0NhcmRQb3B1cCIsImNhcmREYXRhIiwidXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwiZGVzY3JpcHRpb25OYW1lU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfZGVzY3JpcHRpb25FbGVtZW50IiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsInNldFVzZXJJbmZvIiwicHJvZmlsZUVkaXRQb3B1cEZvcm0iLCJmb3JtRGF0YSJdLCJzb3VyY2VSb290IjoiIn0=